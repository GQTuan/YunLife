2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:39 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:03:55')
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:39 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:39 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:54')
2018-01-15 16:02:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:39 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134293', '2018-01-15 16:04:03')
2018-01-15 16:02:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:40 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:03')
2018-01-15 16:02:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134293', `open`='133665', `high`='134480', `low`='133611', `close`='134293', `diff`='5.29', `diff_rate`='0.40%', `time`='2018-01-15 16:04:03' WHERE `name`='xau'
2018-01-15 16:02:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:03' WHERE `name`='usd'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:40 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:41 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:03:55')
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:41 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:41 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:54')
2018-01-15 16:02:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:41 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:04:05')
2018-01-15 16:02:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:42 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:05')
2018-01-15 16:02:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:04:05' WHERE `name`='xau'
2018-01-15 16:02:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:05' WHERE `name`='usd'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:42 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:43 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:43 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:03:55')
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:44 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:44 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:08')
2018-01-15 16:02:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:44 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:04:05')
2018-01-15 16:02:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:44 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:08')
2018-01-15 16:02:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:04:08' WHERE `name`='conc'
2018-01-15 16:02:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:08' WHERE `name`='usd'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:45 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:46 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:06')
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.147', `time`='2018-01-15 16:04:06', `diff`='-0.05', `diff_rate`='-1.66%' WHERE `name`='ng'
2018-01-15 16:02:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.147', `diff`='-0.05', `diff_rate`='-1.66%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:06' WHERE `name`='ng'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:46 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:46 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:08')
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:46 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:10')
2018-01-15 16:02:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:46 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:09')
2018-01-15 16:02:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:10' WHERE `name`='xau'
2018-01-15 16:02:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:09' WHERE `name`='usd'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:47 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:48 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:06')
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:48 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:48 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:02:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:49 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134275', '2018-01-15 16:04:12')
2018-01-15 16:02:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:49 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:09')
2018-01-15 16:02:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:04:11' WHERE `name`='conc'
2018-01-15 16:02:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134275', `open`='133665', `high`='134480', `low`='133611', `close`='134275', `diff`='5.11', `diff_rate`='0.38%', `time`='2018-01-15 16:04:12' WHERE `name`='xau'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:49 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:51 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:06')
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:51 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:51 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:02:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:51 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134275', '2018-01-15 16:04:15')
2018-01-15 16:02:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:52 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:04:15')
2018-01-15 16:02:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134275', `open`='133665', `high`='134480', `low`='133611', `close`='134275', `diff`='5.11', `diff_rate`='0.38%', `time`='2018-01-15 16:04:15' WHERE `name`='xau'
2018-01-15 16:02:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:04:15' WHERE `name`='usd'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:52 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:53 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:53 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:06')
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:53 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:53 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:02:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:54 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134274', '2018-01-15 16:04:17')
2018-01-15 16:02:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:54 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:17')
2018-01-15 16:02:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134274', `open`='133665', `high`='134480', `low`='133611', `close`='134274', `diff`='5.1', `diff_rate`='0.38%', `time`='2018-01-15 16:04:17' WHERE `name`='xau'
2018-01-15 16:02:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:17' WHERE `name`='usd'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:54 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:55 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:55 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:15')
2018-01-15 16:02:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.147', `time`='2018-01-15 16:04:15', `diff`='-0.05', `diff_rate`='-1.66%' WHERE `name`='ng'
2018-01-15 16:02:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.147', `diff`='-0.05', `diff_rate`='-1.66%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:15' WHERE `name`='ng'
2018-01-15 16:02:55 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:56 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:56 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:02:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134274', '2018-01-15 16:04:17')
2018-01-15 16:02:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:56 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:19')
2018-01-15 16:02:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:19' WHERE `name`='usd'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:58 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:15')
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:58 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:58 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:02:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:58 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134274', '2018-01-15 16:04:17')
2018-01-15 16:02:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:58 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:21')
2018-01-15 16:02:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:21' WHERE `name`='usd'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:59 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:00 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:15')
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:00 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:00 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:03:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:00 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:04:24')
2018-01-15 16:03:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:01 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:24')
2018-01-15 16:03:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:04:24' WHERE `name`='xau'
2018-01-15 16:03:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:24' WHERE `name`='usd'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:01 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:02 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:02 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:15')
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:02 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:02 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:03 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:03:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:03 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:26')
2018-01-15 16:03:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:03 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:26')
2018-01-15 16:03:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:26' WHERE `name`='xau'
2018-01-15 16:03:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:26' WHERE `name`='usd'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:03 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:04 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:05 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:25')
2018-01-15 16:03:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.147', `time`='2018-01-15 16:04:25', `diff`='-0.05', `diff_rate`='-1.66%' WHERE `name`='ng'
2018-01-15 16:03:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.147', `diff`='-0.05', `diff_rate`='-1.66%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:25' WHERE `name`='ng'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:06 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:06 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:11')
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:28')
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:06 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:29')
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:28' WHERE `name`='xau'
2018-01-15 16:03:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:29' WHERE `name`='usd'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:08 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:25')
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:08 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:08 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:31')
2018-01-15 16:03:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:08 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:32')
2018-01-15 16:03:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:08 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:32')
2018-01-15 16:03:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:04:31' WHERE `name`='conc'
2018-01-15 16:03:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:32' WHERE `name`='xau'
2018-01-15 16:03:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:32' WHERE `name`='usd'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:09 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:10 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:10 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.147', '2018-01-15 16:04:25')
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:11 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:11 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:31')
2018-01-15 16:03:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:11 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:32')
2018-01-15 16:03:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:11 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.769', '2018-01-15 16:04:35')
2018-01-15 16:03:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.769', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.769', `diff`='-0.148', `diff_rate`='-0.16%', `time`='2018-01-15 16:04:35' WHERE `name`='usd'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:12 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:13 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:34')
2018-01-15 16:03:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:04:34', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:03:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:34' WHERE `name`='ng'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:13 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:13 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:14 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:36')
2018-01-15 16:03:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:14 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:32')
2018-01-15 16:03:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:14 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.765', '2018-01-15 16:04:37')
2018-01-15 16:03:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:04:36' WHERE `name`='conc'
2018-01-15 16:03:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.765', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.765', `diff`='-0.152', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:37' WHERE `name`='usd'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:14 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:15 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:16 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:34')
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:17 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:17 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:36')
2018-01-15 16:03:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134293', '2018-01-15 16:04:41')
2018-01-15 16:03:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:17 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:41')
2018-01-15 16:03:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134293', `open`='133665', `high`='134480', `low`='133611', `close`='134293', `diff`='5.29', `diff_rate`='0.40%', `time`='2018-01-15 16:04:41' WHERE `name`='xau'
2018-01-15 16:03:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:41' WHERE `name`='usd'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:17 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:18 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:20 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:34')
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:20 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:20 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:04:36')
2018-01-15 16:03:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:44')
2018-01-15 16:03:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.759', '2018-01-15 16:04:44')
2018-01-15 16:03:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:44' WHERE `name`='xau'
2018-01-15 16:03:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.759', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.759', `diff`='-0.158', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:44' WHERE `name`='usd'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:22 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:41')
2018-01-15 16:03:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:04:41', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:03:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:41' WHERE `name`='ng'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:23 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:23 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:23 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134287', '2018-01-15 16:04:47')
2018-01-15 16:03:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:23 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.76', '2018-01-15 16:04:47')
2018-01-15 16:03:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:04:45' WHERE `name`='conc'
2018-01-15 16:03:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134287', `open`='133665', `high`='134480', `low`='133611', `close`='134287', `diff`='5.23', `diff_rate`='0.39%', `time`='2018-01-15 16:04:47' WHERE `name`='xau'
2018-01-15 16:03:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.76', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.76', `diff`='-0.157', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:47' WHERE `name`='usd'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:24 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:25 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:25 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:41')
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:25 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:25 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:25 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134288', '2018-01-15 16:04:49')
2018-01-15 16:03:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:26 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.76', '2018-01-15 16:04:49')
2018-01-15 16:03:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134288', `open`='133665', `high`='134480', `low`='133611', `close`='134288', `diff`='5.24', `diff_rate`='0.39%', `time`='2018-01-15 16:04:49' WHERE `name`='xau'
2018-01-15 16:03:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.76', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.76', `diff`='-0.157', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:49' WHERE `name`='usd'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:27 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:46')
2018-01-15 16:03:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:04:46', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:03:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:46' WHERE `name`='ng'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:27 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:28 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134288', '2018-01-15 16:04:49')
2018-01-15 16:03:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:28 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:52')
2018-01-15 16:03:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:52' WHERE `name`='usd'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:29 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:29 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:29 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:46')
2018-01-15 16:03:29 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:30 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:30 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:30 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:04:54')
2018-01-15 16:03:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:31 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:04:52')
2018-01-15 16:03:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:04:54' WHERE `name`='xau'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:32 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:04:51', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:03:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:51' WHERE `name`='ng'
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:33 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:33 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134303', '2018-01-15 16:04:57')
2018-01-15 16:03:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:33 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:04:56')
2018-01-15 16:03:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134303', `open`='133665', `high`='134480', `low`='133611', `close`='134303', `diff`='5.39', `diff_rate`='0.40%', `time`='2018-01-15 16:04:57' WHERE `name`='xau'
2018-01-15 16:03:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:56' WHERE `name`='usd'
2018-01-15 16:03:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:34 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:35 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:35 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:35 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:35 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134303', '2018-01-15 16:04:58')
2018-01-15 16:03:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:36 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.758', '2018-01-15 16:04:59')
2018-01-15 16:03:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134303', `open`='133665', `high`='134480', `low`='133611', `close`='134303', `diff`='5.39', `diff_rate`='0.40%', `time`='2018-01-15 16:04:58' WHERE `name`='xau'
2018-01-15 16:03:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.758', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.758', `diff`='-0.159', `diff_rate`='-0.17%', `time`='2018-01-15 16:04:59' WHERE `name`='usd'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:36 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:37 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:37 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:37 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:38 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:38 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:05:02')
2018-01-15 16:03:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:38 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.762', '2018-01-15 16:05:01')
2018-01-15 16:03:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:05:02' WHERE `name`='xau'
2018-01-15 16:03:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.762', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.762', `diff`='-0.155', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:01' WHERE `name`='usd'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:40 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:40 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:40 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:40 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:04:45')
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:40 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:05:02')
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:40 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.758', '2018-01-15 16:05:03')
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.758', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.758', `diff`='-0.159', `diff_rate`='-0.18%', `time`='2018-01-15 16:05:03' WHERE `name`='usd'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:42 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:42 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:42 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:05:05')
2018-01-15 16:03:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:42 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:05:02')
2018-01-15 16:03:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:43 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.758', '2018-01-15 16:05:03')
2018-01-15 16:03:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:05:05' WHERE `name`='conc'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:44 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:04:51')
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:44 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:44 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:05:05')
2018-01-15 16:03:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:45 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:05:08')
2018-01-15 16:03:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:45 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.762', '2018-01-15 16:05:08')
2018-01-15 16:03:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:05:08' WHERE `name`='xau'
2018-01-15 16:03:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.762', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.762', `diff`='-0.155', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:08' WHERE `name`='usd'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:45 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:46 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:46 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:54')
2018-01-15 16:03:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:04:54', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:03:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:04:54' WHERE `name`='ng'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:47 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:47 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:05:11')
2018-01-15 16:03:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:47 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:05:10')
2018-01-15 16:03:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:47 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.762', '2018-01-15 16:05:08')
2018-01-15 16:03:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:05:11' WHERE `name`='conc'
2018-01-15 16:03:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:05:10' WHERE `name`='xau'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:48 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:49 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:49 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:04:54')
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:49 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:49 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:05:11')
2018-01-15 16:03:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:49 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:05:13')
2018-01-15 16:03:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:50 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.762', '2018-01-15 16:05:12')
2018-01-15 16:03:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:05:13' WHERE `name`='xau'
2018-01-15 16:03:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.762', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.762', `diff`='-0.155', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:12' WHERE `name`='usd'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:50 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:51 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:03:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:05:09', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:03:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:05:09' WHERE `name`='ng'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:51 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:51 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:05:11')
2018-01-15 16:03:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:52 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134273', '2018-01-15 16:05:15')
2018-01-15 16:03:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:52 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.763', '2018-01-15 16:05:15')
2018-01-15 16:03:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134273', `open`='133665', `high`='134480', `low`='133611', `close`='134273', `diff`='5.09', `diff_rate`='0.38%', `time`='2018-01-15 16:05:15' WHERE `name`='xau'
2018-01-15 16:03:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.763', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.763', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:15' WHERE `name`='usd'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:52 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:53 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:53 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:53 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:53 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:54 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:03:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:54 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:05:17')
2018-01-15 16:03:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:54 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:05:17')
2018-01-15 16:03:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:05:17' WHERE `name`='conc'
2018-01-15 16:03:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134281', `open`='133665', `high`='134480', `low`='133611', `close`='134281', `diff`='5.17', `diff_rate`='0.39%', `time`='2018-01-15 16:05:17' WHERE `name`='xau'
2018-01-15 16:03:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:17' WHERE `name`='usd'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:54 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:55 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:56 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:57 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:57 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:03:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:57 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:05:17')
2018-01-15 16:03:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:03:57 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:05:20')
2018-01-15 16:03:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:03:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:20' WHERE `name`='usd'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:57 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:59 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:03:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:03:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:03:59 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:03:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:03:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:03:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:03:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:03:59 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:03:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:03:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:03:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:03:59 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:03:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:03:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:03:59 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134282', '2018-01-15 16:05:23')
2018-01-15 16:04:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:00 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.764', '2018-01-15 16:05:22')
2018-01-15 16:04:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134282', `open`='133665', `high`='134480', `low`='133611', `close`='134282', `diff`='5.18', `diff_rate`='0.39%', `time`='2018-01-15 16:05:23' WHERE `name`='xau'
2018-01-15 16:04:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.764', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.764', `diff`='-0.153', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:22' WHERE `name`='usd'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:00 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:01 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:01 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:01 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:05:25')
2018-01-15 16:04:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:02 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.758', '2018-01-15 16:05:25')
2018-01-15 16:04:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:05:25' WHERE `name`='xau'
2018-01-15 16:04:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.758', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.758', `diff`='-0.159', `diff_rate`='-0.17%', `time`='2018-01-15 16:05:25' WHERE `name`='usd'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:02 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:03 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:03 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:03 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:04 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:05:28')
2018-01-15 16:04:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:04 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.758', '2018-01-15 16:05:28')
2018-01-15 16:04:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:05:28' WHERE `name`='xau'
2018-01-15 16:04:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.758', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.758', `diff`='-0.159', `diff_rate`='-0.18%', `time`='2018-01-15 16:05:28' WHERE `name`='usd'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:04 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:05 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:05 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:06 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:06 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:06 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134300', '2018-01-15 16:05:30')
2018-01-15 16:04:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:07 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.751', '2018-01-15 16:05:29')
2018-01-15 16:04:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134300', `open`='133665', `high`='134480', `low`='133611', `close`='134300', `diff`='5.36', `diff_rate`='0.40%', `time`='2018-01-15 16:05:30' WHERE `name`='xau'
2018-01-15 16:04:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.751', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.751', `diff`='-0.165', `diff_rate`='-0.18%', `time`='2018-01-15 16:05:29' WHERE `name`='usd'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:07 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:08 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:08 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:08 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:09 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:09 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134311', '2018-01-15 16:05:32')
2018-01-15 16:04:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:09 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.741', '2018-01-15 16:05:33')
2018-01-15 16:04:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134311', `open`='133665', `high`='134480', `low`='133611', `close`='134311', `diff`='5.47', `diff_rate`='0.41%', `time`='2018-01-15 16:05:32' WHERE `name`='xau'
2018-01-15 16:04:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.741', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.741', `diff`='-0.176', `diff_rate`='-0.19%', `time`='2018-01-15 16:05:33' WHERE `name`='usd'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:10 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:11 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:11 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:11 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:12 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134311', '2018-01-15 16:05:35')
2018-01-15 16:04:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:12 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.74', '2018-01-15 16:05:35')
2018-01-15 16:04:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134311', `open`='133665', `high`='134480', `low`='133611', `close`='134311', `diff`='5.47', `diff_rate`='0.41%', `time`='2018-01-15 16:05:35' WHERE `name`='xau'
2018-01-15 16:04:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.74', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.74', `diff`='-0.177', `diff_rate`='-0.19%', `time`='2018-01-15 16:05:35' WHERE `name`='usd'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:12 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:13 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:13 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:13 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:14 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:14 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134321', '2018-01-15 16:05:38')
2018-01-15 16:04:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:14 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.739', '2018-01-15 16:05:37')
2018-01-15 16:04:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134321', `open`='133665', `high`='134480', `low`='133611', `close`='134321', `diff`='5.57', `diff_rate`='0.42%', `time`='2018-01-15 16:05:38' WHERE `name`='xau'
2018-01-15 16:04:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.739', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.739', `diff`='-0.178', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:37' WHERE `name`='usd'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:14 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:15 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:16 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:16 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:16 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134310', '2018-01-15 16:05:40')
2018-01-15 16:04:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:17 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.739', '2018-01-15 16:05:41')
2018-01-15 16:04:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134310', `open`='133665', `high`='134480', `low`='133611', `close`='134310', `diff`='5.46', `diff_rate`='0.41%', `time`='2018-01-15 16:05:40' WHERE `name`='xau'
2018-01-15 16:04:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.739', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.739', `diff`='-0.178', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:41' WHERE `name`='usd'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:17 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:18 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:18 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:05:09')
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:19 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:19 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:19 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134309', '2018-01-15 16:05:43')
2018-01-15 16:04:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:19 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.739', '2018-01-15 16:05:43')
2018-01-15 16:04:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134309', `open`='133665', `high`='134480', `low`='133611', `close`='134309', `diff`='5.45', `diff_rate`='0.41%', `time`='2018-01-15 16:05:43' WHERE `name`='xau'
2018-01-15 16:04:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.739', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.739', `diff`='-0.178', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:43' WHERE `name`='usd'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:21 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:37')
2018-01-15 16:04:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:05:37', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:04:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:05:37' WHERE `name`='ng'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:21 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:21 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:22 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134320', '2018-01-15 16:05:46')
2018-01-15 16:04:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:22 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.739', '2018-01-15 16:05:45')
2018-01-15 16:04:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134320', `open`='133665', `high`='134480', `low`='133611', `close`='134320', `diff`='5.56', `diff_rate`='0.42%', `time`='2018-01-15 16:05:46' WHERE `name`='xau'
2018-01-15 16:04:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.739', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.739', `diff`='-0.178', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:45' WHERE `name`='usd'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:22 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:23 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:23 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:37')
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:23 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:23 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:24 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:24 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134320', '2018-01-15 16:05:48')
2018-01-15 16:04:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:24 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.735', '2018-01-15 16:05:48')
2018-01-15 16:04:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134320', `open`='133665', `high`='134480', `low`='133611', `close`='134320', `diff`='5.56', `diff_rate`='0.42%', `time`='2018-01-15 16:05:48' WHERE `name`='xau'
2018-01-15 16:04:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.735', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.735', `diff`='-0.182', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:48' WHERE `name`='usd'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:24 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:25 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:25 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:26 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:05:46', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:04:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:05:46' WHERE `name`='ng'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:26 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:26 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:27 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134322', '2018-01-15 16:05:49')
2018-01-15 16:04:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:27 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.734', '2018-01-15 16:05:50')
2018-01-15 16:04:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134322', `open`='133665', `high`='134480', `low`='133611', `close`='134322', `diff`='5.58', `diff_rate`='0.42%', `time`='2018-01-15 16:05:49' WHERE `name`='xau'
2018-01-15 16:04:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.734', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.734', `diff`='-0.183', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:50' WHERE `name`='usd'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:27 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:28 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:29 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:29 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:29 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134321', '2018-01-15 16:05:52')
2018-01-15 16:04:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:29 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.738', '2018-01-15 16:05:53')
2018-01-15 16:04:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134321', `open`='133665', `high`='134480', `low`='133611', `close`='134321', `diff`='5.57', `diff_rate`='0.42%', `time`='2018-01-15 16:05:52' WHERE `name`='xau'
2018-01-15 16:04:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.738', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.738', `diff`='-0.179', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:53' WHERE `name`='usd'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:29 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:31 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:31 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:31 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:31 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134321', '2018-01-15 16:05:52')
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:31 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.738', '2018-01-15 16:05:53')
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:33 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:33 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:33 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:33 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134320', '2018-01-15 16:05:57')
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:33 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.738', '2018-01-15 16:05:57')
2018-01-15 16:04:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134320', `open`='133665', `high`='134480', `low`='133611', `close`='134320', `diff`='5.56', `diff_rate`='0.42%', `time`='2018-01-15 16:05:57' WHERE `name`='xau'
2018-01-15 16:04:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.738', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.738', `diff`='-0.179', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:57' WHERE `name`='usd'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:34 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:35 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:35 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:35 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:36 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134321', '2018-01-15 16:05:58')
2018-01-15 16:04:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:36 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.738', '2018-01-15 16:05:59')
2018-01-15 16:04:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134321', `open`='133665', `high`='134480', `low`='133611', `close`='134321', `diff`='5.57', `diff_rate`='0.42%', `time`='2018-01-15 16:05:58' WHERE `name`='xau'
2018-01-15 16:04:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.738', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.738', `diff`='-0.179', `diff_rate`='-0.20%', `time`='2018-01-15 16:05:59' WHERE `name`='usd'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:36 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:37 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:37 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:37 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:38 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:38 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134321', '2018-01-15 16:06:02')
2018-01-15 16:04:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:38 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.738', '2018-01-15 16:06:01')
2018-01-15 16:04:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134321', `open`='133665', `high`='134480', `low`='133611', `close`='134321', `diff`='5.57', `diff_rate`='0.42%', `time`='2018-01-15 16:06:02' WHERE `name`='xau'
2018-01-15 16:04:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.738', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.738', `diff`='-0.179', `diff_rate`='-0.20%', `time`='2018-01-15 16:06:01' WHERE `name`='usd'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:39 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:40 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:40 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:40 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:41 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:41 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134329', '2018-01-15 16:06:05')
2018-01-15 16:04:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:41 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.732', '2018-01-15 16:06:05')
2018-01-15 16:04:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:41 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134329', `open`='133665', `high`='134480', `low`='133611', `close`='134329', `diff`='5.65', `diff_rate`='0.42%', `time`='2018-01-15 16:06:05' WHERE `name`='xau'
2018-01-15 16:04:41 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.732', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.732', `diff`='-0.185', `diff_rate`='-0.20%', `time`='2018-01-15 16:06:05' WHERE `name`='usd'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:42 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:43 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:43 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:43 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:44 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:44 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134331', '2018-01-15 16:06:08')
2018-01-15 16:04:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:44 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.717', '2018-01-15 16:06:08')
2018-01-15 16:04:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134331', `open`='133665', `high`='134480', `low`='133611', `close`='134331', `diff`='5.67', `diff_rate`='0.42%', `time`='2018-01-15 16:06:08' WHERE `name`='xau'
2018-01-15 16:04:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.717', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.717', `diff`='-0.2', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:08' WHERE `name`='usd'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:45 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:46 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:46 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:46 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:46 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134331', '2018-01-15 16:06:08')
2018-01-15 16:04:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:47 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.712', '2018-01-15 16:06:10')
2018-01-15 16:04:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.712', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.712', `diff`='-0.205', `diff_rate`='-0.23%', `time`='2018-01-15 16:06:10' WHERE `name`='usd'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:47 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:48 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:49 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:05:46')
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:49 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:49 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:50 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134334', '2018-01-15 16:06:14')
2018-01-15 16:04:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:50 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.712', '2018-01-15 16:06:13')
2018-01-15 16:04:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134334', `open`='133665', `high`='134480', `low`='133611', `close`='134334', `diff`='5.7', `diff_rate`='0.43%', `time`='2018-01-15 16:06:14' WHERE `name`='xau'
2018-01-15 16:04:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.712', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.712', `diff`='-0.205', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:13' WHERE `name`='usd'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:50 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:51 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:52 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:06:11')
2018-01-15 16:04:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:06:11', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:04:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:06:11' WHERE `name`='ng'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:52 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:53 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:53 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:53 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134324', '2018-01-15 16:06:17')
2018-01-15 16:04:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:53 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.713', '2018-01-15 16:06:17')
2018-01-15 16:04:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134324', `open`='133665', `high`='134480', `low`='133611', `close`='134324', `diff`='5.6', `diff_rate`='0.42%', `time`='2018-01-15 16:06:17' WHERE `name`='xau'
2018-01-15 16:04:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.713', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.713', `diff`='-0.204', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:17' WHERE `name`='usd'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:53 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:55 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:55 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:06:11')
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:56 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:56 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134331', '2018-01-15 16:06:20')
2018-01-15 16:04:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:56 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.709', '2018-01-15 16:06:19')
2018-01-15 16:04:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134331', `open`='133665', `high`='134480', `low`='133611', `close`='134331', `diff`='5.67', `diff_rate`='0.42%', `time`='2018-01-15 16:06:20' WHERE `name`='xau'
2018-01-15 16:04:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.709', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.709', `diff`='-0.208', `diff_rate`='-0.23%', `time`='2018-01-15 16:06:19' WHERE `name`='usd'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:57 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:04:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:04:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:04:58 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:06:11')
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:04:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:04:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:04:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:04:58 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:04:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:04:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:04:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:04:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:04:58 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:04:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:04:59 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134313', '2018-01-15 16:06:23')
2018-01-15 16:04:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:04:59 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.714', '2018-01-15 16:06:23')
2018-01-15 16:04:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:04:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134313', `open`='133665', `high`='134480', `low`='133611', `close`='134313', `diff`='5.49', `diff_rate`='0.41%', `time`='2018-01-15 16:06:23' WHERE `name`='xau'
2018-01-15 16:04:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.714', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.714', `diff`='-0.203', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:23' WHERE `name`='usd'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:04:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:04:59 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:00 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:01 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:06:22', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:05:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:06:22' WHERE `name`='ng'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:01 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:02 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:02 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:05:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134301', '2018-01-15 16:06:26')
2018-01-15 16:05:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:02 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.714', '2018-01-15 16:06:26')
2018-01-15 16:05:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134301', `open`='133665', `high`='134480', `low`='133611', `close`='134301', `diff`='5.37', `diff_rate`='0.40%', `time`='2018-01-15 16:06:26' WHERE `name`='xau'
2018-01-15 16:05:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.714', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.714', `diff`='-0.203', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:26' WHERE `name`='usd'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:02 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:04 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:04 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:04 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:05:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:06:27')
2018-01-15 16:05:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:05 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.715', '2018-01-15 16:06:27')
2018-01-15 16:05:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134302', `open`='133665', `high`='134480', `low`='133611', `close`='134302', `diff`='5.38', `diff_rate`='0.40%', `time`='2018-01-15 16:06:27' WHERE `name`='xau'
2018-01-15 16:05:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.715', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.715', `diff`='-0.202', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:27' WHERE `name`='usd'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:05 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:06 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:06 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:06 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:06 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:05:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:07 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134301', '2018-01-15 16:06:30')
2018-01-15 16:05:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:07 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.715', '2018-01-15 16:06:31')
2018-01-15 16:05:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134301', `open`='133665', `high`='134480', `low`='133611', `close`='134301', `diff`='5.37', `diff_rate`='0.40%', `time`='2018-01-15 16:06:30' WHERE `name`='xau'
2018-01-15 16:05:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.715', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.715', `diff`='-0.202', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:31' WHERE `name`='usd'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:07 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:08 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:08 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:09 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:09 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:05:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:10 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:06:32')
2018-01-15 16:05:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:10 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.714', '2018-01-15 16:06:33')
2018-01-15 16:05:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134302', `open`='133665', `high`='134480', `low`='133611', `close`='134302', `diff`='5.38', `diff_rate`='0.40%', `time`='2018-01-15 16:06:32' WHERE `name`='xau'
2018-01-15 16:05:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.714', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.714', `diff`='-0.203', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:33' WHERE `name`='usd'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:10 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:11 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:11 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:11 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:05:17')
2018-01-15 16:05:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:12 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:06:32')
2018-01-15 16:05:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:12 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.713', '2018-01-15 16:06:35')
2018-01-15 16:05:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.713', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.713', `diff`='-0.204', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:35' WHERE `name`='usd'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:12 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:13 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:13 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:14 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:14 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:06:36')
2018-01-15 16:05:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:14 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:06:38')
2018-01-15 16:05:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:15 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.713', '2018-01-15 16:06:38')
2018-01-15 16:05:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:06:36' WHERE `name`='conc'
2018-01-15 16:05:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:06:38' WHERE `name`='xau'
2018-01-15 16:05:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.713', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.713', `diff`='-0.204', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:38' WHERE `name`='usd'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:15 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:16 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:16 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:16 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:17 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:06:36')
2018-01-15 16:05:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:06:40')
2018-01-15 16:05:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:17 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.719', '2018-01-15 16:06:41')
2018-01-15 16:05:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:06:40' WHERE `name`='xau'
2018-01-15 16:05:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.719', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.719', `diff`='-0.198', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:41' WHERE `name`='usd'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:17 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:18 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:19 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:22')
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:19 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:19 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:06:36')
2018-01-15 16:05:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:19 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134282', '2018-01-15 16:06:44')
2018-01-15 16:05:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.724', '2018-01-15 16:06:43')
2018-01-15 16:05:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134282', `open`='133665', `high`='134480', `low`='133611', `close`='134282', `diff`='5.18', `diff_rate`='0.39%', `time`='2018-01-15 16:06:44' WHERE `name`='xau'
2018-01-15 16:05:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.724', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.724', `diff`='-0.193', `diff_rate`='-0.21%', `time`='2018-01-15 16:06:43' WHERE `name`='usd'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:21 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:21 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:42')
2018-01-15 16:05:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:06:42', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:05:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:06:42' WHERE `name`='ng'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:22 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:22 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:06:36')
2018-01-15 16:05:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:22 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:06:44')
2018-01-15 16:05:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:23 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.725', '2018-01-15 16:06:46')
2018-01-15 16:05:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.725', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.725', `diff`='-0.192', `diff_rate`='-0.21%', `time`='2018-01-15 16:06:46' WHERE `name`='usd'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:24 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:42')
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:25 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:25 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:06:48')
2018-01-15 16:05:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:25 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:06:44')
2018-01-15 16:05:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:25 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.724', '2018-01-15 16:06:49')
2018-01-15 16:05:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:06:48' WHERE `name`='conc'
2018-01-15 16:05:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.724', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.724', `diff`='-0.193', `diff_rate`='-0.21%', `time`='2018-01-15 16:06:49' WHERE `name`='usd'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:27 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:27 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:43')
2018-01-15 16:05:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:06:43', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:05:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:06:43' WHERE `name`='ng'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:28 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:28 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:06:50')
2018-01-15 16:05:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:06:44')
2018-01-15 16:05:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:28 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.724', '2018-01-15 16:06:52')
2018-01-15 16:05:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:06:50' WHERE `name`='conc'
2018-01-15 16:05:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.724', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.724', `diff`='-0.193', `diff_rate`='-0.21%', `time`='2018-01-15 16:06:52' WHERE `name`='usd'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:30 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:05:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:05:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:05:31 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:06:43')
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:05:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:05:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:05:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:05:31 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:05:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:05:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:05:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:05:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:05:31 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:06:54')
2018-01-15 16:05:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:05:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:05:32 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134273', '2018-01-15 16:06:55')
2018-01-15 16:05:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:05:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:05:32 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.72', '2018-01-15 16:06:56')
2018-01-15 16:05:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:05:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:05:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:06:54' WHERE `name`='conc'
2018-01-15 16:05:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134273', `open`='133665', `high`='134480', `low`='133611', `close`='134273', `diff`='5.09', `diff_rate`='0.38%', `time`='2018-01-15 16:06:55' WHERE `name`='xau'
2018-01-15 16:05:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.72', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.72', `diff`='-0.197', `diff_rate`='-0.22%', `time`='2018-01-15 16:06:56' WHERE `name`='usd'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:05:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:05:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
