2018-01-15 15:59:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:09 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:09 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:11 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:00:35')
2018-01-15 15:59:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:11 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.788', '2018-01-15 16:00:35')
2018-01-15 15:59:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:00:35' WHERE `name`='xau'
2018-01-15 15:59:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.788', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.788', `diff`='-0.128', `diff_rate`='-0.14%', `time`='2018-01-15 16:00:35' WHERE `name`='usd'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:12 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:13 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:35')
2018-01-15 15:59:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:00:35', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 15:59:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:00:35' WHERE `name`='ng'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:13 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:13 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:25')
2018-01-15 15:59:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:16 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.788', '2018-01-15 16:00:39')
2018-01-15 15:59:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.788', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.788', `diff`='-0.129', `diff_rate`='-0.14%', `time`='2018-01-15 16:00:39' WHERE `name`='usd'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:17 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:35')
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:17 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:18 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:18 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6440', '2018-01-15 16:00:41')
2018-01-15 15:59:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:18 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:00:41')
2018-01-15 15:59:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:18 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.788', '2018-01-15 16:00:41')
2018-01-15 15:59:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6440', `open`='6443', `high`='6459', `low`='6418', `close`='6440', `diff`='0', `diff_rate`='0.00%', `time`='2018-01-15 16:00:41' WHERE `name`='conc'
2018-01-15 15:59:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:00:41' WHERE `name`='xau'
2018-01-15 15:59:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.788', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.788', `diff`='-0.129', `diff_rate`='-0.14%', `time`='2018-01-15 16:00:41' WHERE `name`='usd'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:18 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:20 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:39')
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:00:39', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 15:59:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:00:39' WHERE `name`='ng'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:20 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:20 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:44')
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:00:41')
2018-01-15 15:59:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.789', '2018-01-15 16:00:44')
2018-01-15 15:59:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:00:44' WHERE `name`='conc'
2018-01-15 15:59:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.789', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.789', `diff`='-0.128', `diff_rate`='-0.14%', `time`='2018-01-15 16:00:44' WHERE `name`='usd'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:22 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:39')
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:22 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:22 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:44')
2018-01-15 15:59:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:22 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134301', '2018-01-15 16:00:46')
2018-01-15 15:59:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:23 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.783', '2018-01-15 16:00:46')
2018-01-15 15:59:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134301', `open`='133665', `high`='134480', `low`='133611', `close`='134301', `diff`='5.37', `diff_rate`='0.40%', `time`='2018-01-15 16:00:46' WHERE `name`='xau'
2018-01-15 15:59:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.783', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.783', `diff`='-0.134', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:46' WHERE `name`='usd'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:24 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:24 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:39')
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:25 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:25 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:44')
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:25 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:25 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.781', '2018-01-15 16:00:48')
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134302', `open`='133665', `high`='134480', `low`='133611', `close`='134302', `diff`='5.38', `diff_rate`='0.40%', `time`='2018-01-15 16:00:47' WHERE `name`='xau'
2018-01-15 15:59:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.781', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.781', `diff`='-0.135', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:48' WHERE `name`='usd'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:27 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:45')
2018-01-15 15:59:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:00:45', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 15:59:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:00:45' WHERE `name`='ng'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:27 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:27 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:44')
2018-01-15 15:59:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:28 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.782', '2018-01-15 16:00:51')
2018-01-15 15:59:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.782', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.782', `diff`='-0.135', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:51' WHERE `name`='usd'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:29 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:29 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:50')
2018-01-15 15:59:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:00:50', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 15:59:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:00:50' WHERE `name`='ng'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:29 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:29 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:30 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:00:52')
2018-01-15 15:59:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:30 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:30 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.782', '2018-01-15 16:00:52')
2018-01-15 15:59:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:00:52' WHERE `name`='conc'
2018-01-15 15:59:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.782', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.782', `diff`='-0.135', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:52' WHERE `name`='usd'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:30 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:31 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:33 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:50')
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:33 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:33 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:00:54')
2018-01-15 15:59:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:33 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.777', '2018-01-15 16:00:57')
2018-01-15 15:59:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:00:54' WHERE `name`='conc'
2018-01-15 15:59:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.777', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.777', `diff`='-0.14', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:57' WHERE `name`='usd'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:34 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:35 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:53')
2018-01-15 15:59:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:00:53', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 15:59:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:00:53' WHERE `name`='ng'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:35 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:35 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6441', '2018-01-15 16:00:59')
2018-01-15 15:59:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:36 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:36 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.777', '2018-01-15 16:00:59')
2018-01-15 15:59:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6441', `open`='6443', `high`='6459', `low`='6418', `close`='6441', `diff`='0.01', `diff_rate`='0.02%', `time`='2018-01-15 16:00:59' WHERE `name`='conc'
2018-01-15 15:59:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.777', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.777', `diff`='-0.14', `diff_rate`='-0.15%', `time`='2018-01-15 16:00:59' WHERE `name`='usd'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:36 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:37 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:37 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:53')
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:38 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:38 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:02')
2018-01-15 15:59:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:39 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:39 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.776', '2018-01-15 16:01:02')
2018-01-15 15:59:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:01:02' WHERE `name`='conc'
2018-01-15 15:59:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.776', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.776', `diff`='-0.141', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:02' WHERE `name`='usd'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:39 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:40 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:40 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:41 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:53')
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:41 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:41 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:02')
2018-01-15 15:59:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:41 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:42 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.775', '2018-01-15 16:01:05')
2018-01-15 15:59:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.775', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.775', `diff`='-0.141', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:05' WHERE `name`='usd'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:42 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:43 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:43 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:00:53')
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:43 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:43 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:02')
2018-01-15 15:59:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:44 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:00:47')
2018-01-15 15:59:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:44 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.775', '2018-01-15 16:01:06')
2018-01-15 15:59:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.775', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.775', `diff`='-0.142', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:06' WHERE `name`='usd'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:45 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:01:07')
2018-01-15 15:59:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:01:07', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 15:59:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:07' WHERE `name`='ng'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:46 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:46 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:02')
2018-01-15 15:59:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:46 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134293', '2018-01-15 16:01:10')
2018-01-15 15:59:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:46 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.775', '2018-01-15 16:01:09')
2018-01-15 15:59:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134293', `open`='133665', `high`='134480', `low`='133611', `close`='134293', `diff`='5.29', `diff_rate`='0.40%', `time`='2018-01-15 16:01:10' WHERE `name`='xau'
2018-01-15 15:59:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.775', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.775', `diff`='-0.142', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:09' WHERE `name`='usd'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:46 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:47 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:48 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:08')
2018-01-15 15:59:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.152', `time`='2018-01-15 16:01:08', `diff`='-0.05', `diff_rate`='-1.5%' WHERE `name`='ng'
2018-01-15 15:59:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.152', `diff`='-0.05', `diff_rate`='-1.5%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:08' WHERE `name`='ng'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:48 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:48 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:02')
2018-01-15 15:59:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:49 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:01:12')
2018-01-15 15:59:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:49 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.775', '2018-01-15 16:01:10')
2018-01-15 15:59:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:01:12' WHERE `name`='xau'
2018-01-15 15:59:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.775', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.775', `diff`='-0.142', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:10' WHERE `name`='usd'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:49 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:50 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:50 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:01:11')
2018-01-15 15:59:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:01:11', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 15:59:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:11' WHERE `name`='ng'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:51 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:51 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:52 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:15')
2018-01-15 15:59:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:52 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134301', '2018-01-15 16:01:16')
2018-01-15 15:59:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:52 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:01:15')
2018-01-15 15:59:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:01:15' WHERE `name`='conc'
2018-01-15 15:59:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134301', `open`='133665', `high`='134480', `low`='133611', `close`='134301', `diff`='5.37', `diff_rate`='0.40%', `time`='2018-01-15 16:01:16' WHERE `name`='xau'
2018-01-15 15:59:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.773', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.773', `diff`='-0.144', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:15' WHERE `name`='usd'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:52 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:53 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:53 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:53 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:01:11')
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:54 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:54 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:01:17')
2018-01-15 15:59:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:54 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134318', '2018-01-15 16:01:18')
2018-01-15 15:59:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:54 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.761', '2018-01-15 16:01:19')
2018-01-15 15:59:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:01:17' WHERE `name`='conc'
2018-01-15 15:59:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134318', `open`='133665', `high`='134480', `low`='133611', `close`='134318', `diff`='5.54', `diff_rate`='0.41%', `time`='2018-01-15 16:01:18' WHERE `name`='xau'
2018-01-15 15:59:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.761', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.761', `diff`='-0.156', `diff_rate`='-0.17%', `time`='2018-01-15 16:01:19' WHERE `name`='usd'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:55 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:56 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:56 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:57 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:01:15')
2018-01-15 15:59:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.150', `time`='2018-01-15 16:01:15', `diff`='-0.05', `diff_rate`='-1.56%' WHERE `name`='ng'
2018-01-15 15:59:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.150', `diff`='-0.05', `diff_rate`='-1.56%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:15' WHERE `name`='ng'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:57 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:57 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6446', '2018-01-15 16:01:20')
2018-01-15 15:59:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 15:59:57 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134313', '2018-01-15 16:01:21')
2018-01-15 15:59:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 15:59:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 15:59:57 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.756', '2018-01-15 16:01:21')
2018-01-15 15:59:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 15:59:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6446', `open`='6443', `high`='6459', `low`='6418', `close`='6446', `diff`='0.06', `diff_rate`='0.09%', `time`='2018-01-15 16:01:20' WHERE `name`='conc'
2018-01-15 15:59:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134313', `open`='133665', `high`='134480', `low`='133611', `close`='134313', `diff`='5.49', `diff_rate`='0.41%', `time`='2018-01-15 16:01:21' WHERE `name`='xau'
2018-01-15 15:59:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.756', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.756', `diff`='-0.161', `diff_rate`='-0.18%', `time`='2018-01-15 16:01:21' WHERE `name`='usd'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:58 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:59 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 15:59:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 15:59:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 15:59:59 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:01:15')
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 15:59:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 15:59:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 15:59:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 15:59:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 15:59:59 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 15:59:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 15:59:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 15:59:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 15:59:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 15:59:59 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6446', '2018-01-15 16:01:23')
2018-01-15 16:00:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:00 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134312', '2018-01-15 16:01:23')
2018-01-15 16:00:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:00 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.756', '2018-01-15 16:01:22')
2018-01-15 16:00:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6446', `open`='6443', `high`='6459', `low`='6418', `close`='6446', `diff`='0.06', `diff_rate`='0.09%', `time`='2018-01-15 16:01:23' WHERE `name`='conc'
2018-01-15 16:00:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134312', `open`='133665', `high`='134480', `low`='133611', `close`='134312', `diff`='5.48', `diff_rate`='0.41%', `time`='2018-01-15 16:01:23' WHERE `name`='xau'
2018-01-15 16:00:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.756', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.756', `diff`='-0.161', `diff_rate`='-0.18%', `time`='2018-01-15 16:01:22' WHERE `name`='usd'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:00 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point))) OR (order_state = 1 and product_id in (8,13) )
2018-01-15 16:00:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:01 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:01 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:21')
2018-01-15 16:00:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.152', `time`='2018-01-15 16:01:21', `diff`='-0.05', `diff_rate`='-1.5%' WHERE `name`='ng'
2018-01-15 16:00:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.152', `diff`='-0.05', `diff_rate`='-1.5%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:21' WHERE `name`='ng'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:02 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:02 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:26')
2018-01-15 16:00:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:01:26')
2018-01-15 16:00:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:03 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.756', '2018-01-15 16:01:25')
2018-01-15 16:00:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:01:26' WHERE `name`='conc'
2018-01-15 16:00:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134302', `open`='133665', `high`='134480', `low`='133611', `close`='134302', `diff`='5.38', `diff_rate`='0.40%', `time`='2018-01-15 16:01:26' WHERE `name`='xau'
2018-01-15 16:00:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.756', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.756', `diff`='-0.161', `diff_rate`='-0.18%', `time`='2018-01-15 16:01:25' WHERE `name`='usd'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:03 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:05 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:21')
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:05 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:06 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:01:28')
2018-01-15 16:00:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:01:30')
2018-01-15 16:00:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:06 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.762', '2018-01-15 16:01:30')
2018-01-15 16:00:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:01:28' WHERE `name`='conc'
2018-01-15 16:00:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:01:30' WHERE `name`='xau'
2018-01-15 16:00:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.762', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.762', `diff`='-0.154', `diff_rate`='-0.17%', `time`='2018-01-15 16:01:30' WHERE `name`='usd'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:07 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:08 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:01:25')
2018-01-15 16:00:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:01:25', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 16:00:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:25' WHERE `name`='ng'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:08 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:08 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:31')
2018-01-15 16:00:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:08 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:01:31')
2018-01-15 16:00:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:09 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:01:32')
2018-01-15 16:00:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:01:31' WHERE `name`='conc'
2018-01-15 16:00:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134281', `open`='133665', `high`='134480', `low`='133611', `close`='134281', `diff`='5.17', `diff_rate`='0.39%', `time`='2018-01-15 16:01:31' WHERE `name`='xau'
2018-01-15 16:00:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:32' WHERE `name`='usd'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:09 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:10 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:10 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:10 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:01:32')
2018-01-15 16:00:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:01:32', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:00:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:32' WHERE `name`='ng'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:11 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:11 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:01:33')
2018-01-15 16:00:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:12 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134293', '2018-01-15 16:01:35')
2018-01-15 16:00:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:12 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:01:35')
2018-01-15 16:00:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:01:33' WHERE `name`='conc'
2018-01-15 16:00:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134293', `open`='133665', `high`='134480', `low`='133611', `close`='134293', `diff`='5.29', `diff_rate`='0.40%', `time`='2018-01-15 16:01:35' WHERE `name`='xau'
2018-01-15 16:00:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:35' WHERE `name`='usd'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:14 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:15 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:01:36')
2018-01-15 16:00:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:01:36', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:00:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:36' WHERE `name`='ng'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:15 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:15 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:01:38')
2018-01-15 16:00:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:16 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134302', '2018-01-15 16:01:40')
2018-01-15 16:00:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:16 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:01:39')
2018-01-15 16:00:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:01:38' WHERE `name`='conc'
2018-01-15 16:00:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134302', `open`='133665', `high`='134480', `low`='133611', `close`='134302', `diff`='5.38', `diff_rate`='0.40%', `time`='2018-01-15 16:01:40' WHERE `name`='xau'
2018-01-15 16:00:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:39' WHERE `name`='usd'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:17 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:18 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:01:36')
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:18 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:18 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:01:38')
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:18 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:01:42')
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:18 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:01:41')
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:01:42' WHERE `name`='xau'
2018-01-15 16:00:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:41' WHERE `name`='usd'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:19 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:20 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:01:36')
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:20 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:20 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:42')
2018-01-15 16:00:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134293', '2018-01-15 16:01:43')
2018-01-15 16:00:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:01:44')
2018-01-15 16:00:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:01:42' WHERE `name`='conc'
2018-01-15 16:00:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134293', `open`='133665', `high`='134480', `low`='133611', `close`='134293', `diff`='5.29', `diff_rate`='0.40%', `time`='2018-01-15 16:01:43' WHERE `name`='xau'
2018-01-15 16:00:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:44' WHERE `name`='usd'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:22 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:22 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:01:40')
2018-01-15 16:00:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:01:40', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:00:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:40' WHERE `name`='ng'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:23 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:23 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:42')
2018-01-15 16:00:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:23 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:01:47')
2018-01-15 16:00:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:24 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.77', '2018-01-15 16:01:48')
2018-01-15 16:00:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:01:47' WHERE `name`='xau'
2018-01-15 16:00:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.77', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.77', `diff`='-0.146', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:48' WHERE `name`='usd'
2018-01-15 16:00:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:27 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:27 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:01:46')
2018-01-15 16:00:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.150', `time`='2018-01-15 16:01:46', `diff`='-0.05', `diff_rate`='-1.56%' WHERE `name`='ng'
2018-01-15 16:00:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.150', `diff`='-0.05', `diff_rate`='-1.56%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:46' WHERE `name`='ng'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:28 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:28 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:50')
2018-01-15 16:00:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:01:53')
2018-01-15 16:00:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:29 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.77', '2018-01-15 16:01:48')
2018-01-15 16:00:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:01:50' WHERE `name`='conc'
2018-01-15 16:00:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134281', `open`='133665', `high`='134480', `low`='133611', `close`='134281', `diff`='5.17', `diff_rate`='0.39%', `time`='2018-01-15 16:01:53' WHERE `name`='xau'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:29 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:30 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:01:46')
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:30 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:31 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:31 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:50')
2018-01-15 16:00:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:31 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:01:55')
2018-01-15 16:00:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:31 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.77', '2018-01-15 16:01:48')
2018-01-15 16:00:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134281', `open`='133665', `high`='134480', `low`='133611', `close`='134281', `diff`='5.17', `diff_rate`='0.39%', `time`='2018-01-15 16:01:55' WHERE `name`='xau'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:32 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:33 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:01:46')
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:33 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:33 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:01:50')
2018-01-15 16:00:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134282', '2018-01-15 16:01:56')
2018-01-15 16:00:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:34 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.77', '2018-01-15 16:01:57')
2018-01-15 16:00:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134282', `open`='133665', `high`='134480', `low`='133611', `close`='134282', `diff`='5.18', `diff_rate`='0.39%', `time`='2018-01-15 16:01:56' WHERE `name`='xau'
2018-01-15 16:00:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.77', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.77', `diff`='-0.147', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:57' WHERE `name`='usd'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:34 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:35 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:35 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:56')
2018-01-15 16:00:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.152', `time`='2018-01-15 16:01:56', `diff`='-0.05', `diff_rate`='-1.5%' WHERE `name`='ng'
2018-01-15 16:00:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.152', `diff`='-0.05', `diff_rate`='-1.5%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:01:56' WHERE `name`='ng'
2018-01-15 16:00:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:37 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:37 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:01:58')
2018-01-15 16:00:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:37 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134281', '2018-01-15 16:01:59')
2018-01-15 16:00:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:37 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.77', '2018-01-15 16:01:59')
2018-01-15 16:00:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:01:58' WHERE `name`='conc'
2018-01-15 16:00:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134281', `open`='133665', `high`='134480', `low`='133611', `close`='134281', `diff`='5.17', `diff_rate`='0.39%', `time`='2018-01-15 16:01:59' WHERE `name`='xau'
2018-01-15 16:00:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.77', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.77', `diff`='-0.146', `diff_rate`='-0.16%', `time`='2018-01-15 16:01:59' WHERE `name`='usd'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:39 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:56')
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:39 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:40 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:40 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:03')
2018-01-15 16:00:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:40 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:04')
2018-01-15 16:00:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:40 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.766', '2018-01-15 16:02:03')
2018-01-15 16:00:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:02:03' WHERE `name`='conc'
2018-01-15 16:00:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134291', `open`='133665', `high`='134480', `low`='133611', `close`='134291', `diff`='5.27', `diff_rate`='0.39%', `time`='2018-01-15 16:02:04' WHERE `name`='xau'
2018-01-15 16:00:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.766', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.766', `diff`='-0.151', `diff_rate`='-0.17%', `time`='2018-01-15 16:02:03' WHERE `name`='usd'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:42 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:56')
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:42 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:42 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:03')
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:42 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:04')
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:42 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.766', '2018-01-15 16:02:06')
2018-01-15 16:00:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.766', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.766', `diff`='-0.151', `diff_rate`='-0.17%', `time`='2018-01-15 16:02:06' WHERE `name`='usd'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:44 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:01:56')
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:44 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:44 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:08')
2018-01-15 16:00:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:44 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:02:08')
2018-01-15 16:00:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:45 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.766', '2018-01-15 16:02:06')
2018-01-15 16:00:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:02:08' WHERE `name`='conc'
2018-01-15 16:00:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:02:08' WHERE `name`='xau'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:45 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:46 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:47 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:07')
2018-01-15 16:00:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:02:07', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 16:00:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:07' WHERE `name`='ng'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:47 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:48 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:48 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:08')
2018-01-15 16:00:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:48 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:12')
2018-01-15 16:00:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:48 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.766', '2018-01-15 16:02:09')
2018-01-15 16:00:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134291', `open`='133665', `high`='134480', `low`='133611', `close`='134291', `diff`='5.27', `diff_rate`='0.39%', `time`='2018-01-15 16:02:12' WHERE `name`='xau'
2018-01-15 16:00:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.766', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.766', `diff`='-0.151', `diff_rate`='-0.17%', `time`='2018-01-15 16:02:09' WHERE `name`='usd'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:48 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:49 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:49 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:49 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:07')
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:50 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:50 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:12')
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:50 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:12')
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:50 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.766', '2018-01-15 16:02:09')
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:02:12' WHERE `name`='conc'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:51 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:52 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:02:11')
2018-01-15 16:00:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.152', `time`='2018-01-15 16:02:11', `diff`='-0.05', `diff_rate`='-1.5%' WHERE `name`='ng'
2018-01-15 16:00:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.152', `diff`='-0.05', `diff_rate`='-1.5%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:11' WHERE `name`='ng'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:52 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:52 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:12')
2018-01-15 16:00:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:53 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:02:17')
2018-01-15 16:00:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:53 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:02:15')
2018-01-15 16:00:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:02:17' WHERE `name`='xau'
2018-01-15 16:00:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:15' WHERE `name`='usd'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:53 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:54 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:56 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.152', '2018-01-15 16:02:11')
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:56 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:00:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:00:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:00:56 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:12')
2018-01-15 16:00:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:00:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:00:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134292', '2018-01-15 16:02:20')
2018-01-15 16:00:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:00:57 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:18')
2018-01-15 16:00:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134292', `open`='133665', `high`='134480', `low`='133611', `close`='134292', `diff`='5.28', `diff_rate`='0.39%', `time`='2018-01-15 16:02:20' WHERE `name`='xau'
2018-01-15 16:00:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:18' WHERE `name`='usd'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:00:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:00:57 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:00:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:00:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:00:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:00:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:00:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:00:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:00:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:00:58 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:00:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:00:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:00:58 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:16')
2018-01-15 16:00:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:00:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:00:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:02:16', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 16:01:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:16' WHERE `name`='ng'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:00 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:00 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:22')
2018-01-15 16:01:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:01 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:21')
2018-01-15 16:01:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:01 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:24')
2018-01-15 16:01:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:02:22' WHERE `name`='conc'
2018-01-15 16:01:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134291', `open`='133665', `high`='134480', `low`='133611', `close`='134291', `diff`='5.27', `diff_rate`='0.39%', `time`='2018-01-15 16:02:21' WHERE `name`='xau'
2018-01-15 16:01:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:24' WHERE `name`='usd'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:01 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:02 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:02 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:03 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.154', '2018-01-15 16:02:21')
2018-01-15 16:01:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.154', `time`='2018-01-15 16:02:21', `diff`='-0.05', `diff_rate`='-1.44%' WHERE `name`='ng'
2018-01-15 16:01:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.154', `diff`='-0.05', `diff_rate`='-1.44%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:21' WHERE `name`='ng'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:03 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:04 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:04 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6442', '2018-01-15 16:02:27')
2018-01-15 16:01:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:28')
2018-01-15 16:01:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:04 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:28')
2018-01-15 16:01:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6442', `open`='6443', `high`='6459', `low`='6418', `close`='6442', `diff`='0.02', `diff_rate`='0.03%', `time`='2018-01-15 16:02:27' WHERE `name`='conc'
2018-01-15 16:01:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134291', `open`='133665', `high`='134480', `low`='133611', `close`='134291', `diff`='5.27', `diff_rate`='0.39%', `time`='2018-01-15 16:02:28' WHERE `name`='xau'
2018-01-15 16:01:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.144', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:28' WHERE `name`='usd'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:05 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:06 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:06 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:26')
2018-01-15 16:01:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:02:26', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 16:01:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:26' WHERE `name`='ng'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:06 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:06 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:30')
2018-01-15 16:01:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134291', '2018-01-15 16:02:28')
2018-01-15 16:01:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:07 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:02:29')
2018-01-15 16:01:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:02:30' WHERE `name`='conc'
2018-01-15 16:01:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.773', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.773', `diff`='-0.144', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:29' WHERE `name`='usd'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:07 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:08 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:26')
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:08 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:09 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:30')
2018-01-15 16:01:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:09 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134282', '2018-01-15 16:02:33')
2018-01-15 16:01:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:09 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.774', '2018-01-15 16:02:33')
2018-01-15 16:01:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134282', `open`='133665', `high`='134480', `low`='133611', `close`='134282', `diff`='5.18', `diff_rate`='0.39%', `time`='2018-01-15 16:02:33' WHERE `name`='xau'
2018-01-15 16:01:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.774', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.774', `diff`='-0.143', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:33' WHERE `name`='usd'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:10 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:11 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:30')
2018-01-15 16:01:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:02:30', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 16:01:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:30' WHERE `name`='ng'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:11 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:11 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:30')
2018-01-15 16:01:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:11 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134288', '2018-01-15 16:02:36')
2018-01-15 16:01:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:12 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.774', '2018-01-15 16:02:35')
2018-01-15 16:01:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134288', `open`='133665', `high`='134480', `low`='133611', `close`='134288', `diff`='5.24', `diff_rate`='0.39%', `time`='2018-01-15 16:02:36' WHERE `name`='xau'
2018-01-15 16:01:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.774', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.774', `diff`='-0.143', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:35' WHERE `name`='usd'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:12 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:13 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:30')
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:13 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:13 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:14 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:30')
2018-01-15 16:01:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:14 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:02:36')
2018-01-15 16:01:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:14 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:38')
2018-01-15 16:01:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:38' WHERE `name`='usd'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:14 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:15 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:15 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.154', '2018-01-15 16:02:34')
2018-01-15 16:01:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.154', `time`='2018-01-15 16:02:34', `diff`='-0.05', `diff_rate`='-1.44%' WHERE `name`='ng'
2018-01-15 16:01:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.154', `diff`='-0.05', `diff_rate`='-1.44%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:34' WHERE `name`='ng'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:16 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:16 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:17 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:02:40')
2018-01-15 16:01:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:02:36')
2018-01-15 16:01:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:17 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:02:39')
2018-01-15 16:01:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:02:40' WHERE `name`='conc'
2018-01-15 16:01:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.773', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.773', `diff`='-0.143', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:39' WHERE `name`='usd'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:18 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:19 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:19 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.154', '2018-01-15 16:02:34')
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:19 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:19 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:02:40')
2018-01-15 16:01:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:02:36')
2018-01-15 16:01:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:02:39')
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:21 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:41')
2018-01-15 16:01:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.153', `time`='2018-01-15 16:02:41', `diff`='-0.05', `diff_rate`='-1.47%' WHERE `name`='ng'
2018-01-15 16:01:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.153', `diff`='-0.05', `diff_rate`='-1.47%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:41' WHERE `name`='ng'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:22 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:22 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6445', '2018-01-15 16:02:44')
2018-01-15 16:01:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:22 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:02:45')
2018-01-15 16:01:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:22 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.771', '2018-01-15 16:02:45')
2018-01-15 16:01:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6445', `open`='6443', `high`='6459', `low`='6418', `close`='6445', `diff`='0.05', `diff_rate`='0.08%', `time`='2018-01-15 16:02:44' WHERE `name`='conc'
2018-01-15 16:01:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:02:45' WHERE `name`='xau'
2018-01-15 16:01:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.771', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.771', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:45' WHERE `name`='usd'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:22 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:24 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.153', '2018-01-15 16:02:41')
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:24 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:24 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:02:46')
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:24 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:02:45')
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:24 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:47')
2018-01-15 16:01:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:02:46' WHERE `name`='conc'
2018-01-15 16:01:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:47' WHERE `name`='usd'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:26 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:26 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:44')
2018-01-15 16:01:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:02:44', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 16:01:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:44' WHERE `name`='ng'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:26 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:26 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:02:46')
2018-01-15 16:01:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:27 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:02:45')
2018-01-15 16:01:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:27 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.772', '2018-01-15 16:02:49')
2018-01-15 16:01:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.772', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.772', `diff`='-0.145', `diff_rate`='-0.16%', `time`='2018-01-15 16:02:49' WHERE `name`='usd'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:27 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:28 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:44')
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:28 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:28 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:29 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6445', '2018-01-15 16:02:52')
2018-01-15 16:01:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:29 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:02:52')
2018-01-15 16:01:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:29 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.779', '2018-01-15 16:02:53')
2018-01-15 16:01:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6445', `open`='6443', `high`='6459', `low`='6418', `close`='6445', `diff`='0.05', `diff_rate`='0.08%', `time`='2018-01-15 16:02:52' WHERE `name`='conc'
2018-01-15 16:01:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:02:52' WHERE `name`='xau'
2018-01-15 16:01:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.779', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.779', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:02:53' WHERE `name`='usd'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:30 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:31 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:51')
2018-01-15 16:01:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:02:51', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 16:01:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:51' WHERE `name`='ng'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:32 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:32 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:02:54')
2018-01-15 16:01:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:02:57')
2018-01-15 16:01:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:33 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.779', '2018-01-15 16:02:55')
2018-01-15 16:01:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:02:54' WHERE `name`='conc'
2018-01-15 16:01:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:02:57' WHERE `name`='xau'
2018-01-15 16:01:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.779', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.779', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:02:55' WHERE `name`='usd'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:33 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:35 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:51')
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:35 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:35 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:59')
2018-01-15 16:01:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:35 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:02:57')
2018-01-15 16:01:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:36 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.778', '2018-01-15 16:02:59')
2018-01-15 16:01:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:02:59' WHERE `name`='conc'
2018-01-15 16:01:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.778', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.778', `diff`='-0.139', `diff_rate`='-0.15%', `time`='2018-01-15 16:02:59' WHERE `name`='usd'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:36 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:37 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:51')
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:37 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:37 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:02:59')
2018-01-15 16:01:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:38 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:01')
2018-01-15 16:01:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:38 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.778', '2018-01-15 16:03:01')
2018-01-15 16:01:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:03:01' WHERE `name`='xau'
2018-01-15 16:01:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.778', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.778', `diff`='-0.139', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:01' WHERE `name`='usd'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:39 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:39 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:55')
2018-01-15 16:01:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:02:55', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 16:01:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:02:55' WHERE `name`='ng'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:40 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:40 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:03')
2018-01-15 16:01:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:40 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:01')
2018-01-15 16:01:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:40 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.778', '2018-01-15 16:03:03')
2018-01-15 16:01:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:03:03' WHERE `name`='conc'
2018-01-15 16:01:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.778', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.778', `diff`='-0.139', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:03' WHERE `name`='usd'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:41 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:42 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:55')
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:42 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:42 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:03')
2018-01-15 16:01:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:42 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:01')
2018-01-15 16:01:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:43 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.779', '2018-01-15 16:03:05')
2018-01-15 16:01:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.779', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.779', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:05' WHERE `name`='usd'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:43 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:44 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:55')
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:44 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:44 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:03')
2018-01-15 16:01:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:45 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:08')
2018-01-15 16:01:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:45 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.777', '2018-01-15 16:03:08')
2018-01-15 16:01:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134294', `open`='133665', `high`='134480', `low`='133611', `close`='134294', `diff`='5.3', `diff_rate`='0.40%', `time`='2018-01-15 16:03:08' WHERE `name`='xau'
2018-01-15 16:01:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.777', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.777', `diff`='-0.14', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:08' WHERE `name`='usd'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:45 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:46 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:46 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:02:55')
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:48 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:48 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:03')
2018-01-15 16:01:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:48 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:08')
2018-01-15 16:01:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:49 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.778', '2018-01-15 16:03:11')
2018-01-15 16:01:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.778', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.778', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:11' WHERE `name`='usd'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:49 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:50 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:03:08')
2018-01-15 16:01:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.151', `time`='2018-01-15 16:03:08', `diff`='-0.05', `diff_rate`='-1.53%' WHERE `name`='ng'
2018-01-15 16:01:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.151', `diff`='-0.05', `diff_rate`='-1.53%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:08' WHERE `name`='ng'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:50 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:50 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:51 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:03')
2018-01-15 16:01:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:51 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:08')
2018-01-15 16:01:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:51 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.783', '2018-01-15 16:03:15')
2018-01-15 16:01:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.783', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.783', `diff`='-0.134', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:15' WHERE `name`='usd'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:51 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:53 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.151', '2018-01-15 16:03:08')
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:53 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:53 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:17')
2018-01-15 16:01:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:53 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:08')
2018-01-15 16:01:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:54 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.783', '2018-01-15 16:03:16')
2018-01-15 16:01:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:03:17' WHERE `name`='conc'
2018-01-15 16:01:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.783', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.783', `diff`='-0.134', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:16' WHERE `name`='usd'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:54 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:55 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:15')
2018-01-15 16:01:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:03:15', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:01:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:15' WHERE `name`='ng'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:55 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:55 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:56 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:17')
2018-01-15 16:01:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134294', '2018-01-15 16:03:08')
2018-01-15 16:01:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:56 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.784', '2018-01-15 16:03:20')
2018-01-15 16:01:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.784', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.784', `diff`='-0.133', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:20' WHERE `name`='usd'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:56 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:57 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:01:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:01:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:57 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:01:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:01:58 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:15')
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:01:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:01:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:01:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:01:58 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:01:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:01:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:01:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:01:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:01:58 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:20')
2018-01-15 16:01:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:01:59 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:03:21')
2018-01-15 16:01:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:01:59 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.784', '2018-01-15 16:03:21')
2018-01-15 16:01:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:01:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:03:20' WHERE `name`='conc'
2018-01-15 16:01:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:03:21' WHERE `name`='xau'
2018-01-15 16:01:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.784', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.784', `diff`='-0.132', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:21' WHERE `name`='usd'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:01:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:01:59 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:00 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:01 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:20')
2018-01-15 16:02:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:03:20', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:02:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:20' WHERE `name`='ng'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:01 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:01 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:02 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:20')
2018-01-15 16:02:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:03:21')
2018-01-15 16:02:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:02 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.785', '2018-01-15 16:03:26')
2018-01-15 16:02:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.785', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.785', `diff`='-0.132', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:26' WHERE `name`='usd'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:02 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:03 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:04 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:20')
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:04 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:04 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:20')
2018-01-15 16:02:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:03:21')
2018-01-15 16:02:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:05 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.785', '2018-01-15 16:03:26')
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:05 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:06 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:06 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:06 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:23')
2018-01-15 16:02:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:03:23', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:02:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:23' WHERE `name`='ng'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:07 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:07 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:31')
2018-01-15 16:02:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:08 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:03:21')
2018-01-15 16:02:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:08 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.784', '2018-01-15 16:03:32')
2018-01-15 16:02:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:03:31' WHERE `name`='conc'
2018-01-15 16:02:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.784', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.784', `diff`='-0.132', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:32' WHERE `name`='usd'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:08 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:09 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:09 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:23')
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:09 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:10 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:10 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:31')
2018-01-15 16:02:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:10 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:03:33')
2018-01-15 16:02:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:10 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.783', '2018-01-15 16:03:34')
2018-01-15 16:02:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:03:33' WHERE `name`='xau'
2018-01-15 16:02:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.783', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.783', `diff`='-0.133', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:34' WHERE `name`='usd'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:10 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:11 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:12 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.148', `time`='2018-01-15 16:03:28', `diff`='-0.05', `diff_rate`='-1.63%' WHERE `name`='ng'
2018-01-15 16:02:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.148', `diff`='-0.05', `diff_rate`='-1.63%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:28' WHERE `name`='ng'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:12 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:12 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:31')
2018-01-15 16:02:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:13 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:03:37')
2018-01-15 16:02:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:13 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.779', '2018-01-15 16:03:36')
2018-01-15 16:02:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:03:37' WHERE `name`='xau'
2018-01-15 16:02:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.779', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.779', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:36' WHERE `name`='usd'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:13 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:14 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:14 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:15 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:15 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:31')
2018-01-15 16:02:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:15 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134275', '2018-01-15 16:03:37')
2018-01-15 16:02:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:16 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.78', '2018-01-15 16:03:37')
2018-01-15 16:02:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.78', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.78', `diff`='-0.137', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:37' WHERE `name`='usd'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:16 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:17 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:17 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:17 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:40')
2018-01-15 16:02:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:18 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134274', '2018-01-15 16:03:42')
2018-01-15 16:02:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:18 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.78', '2018-01-15 16:03:40')
2018-01-15 16:02:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:03:40' WHERE `name`='conc'
2018-01-15 16:02:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134274', `open`='133665', `high`='134480', `low`='133611', `close`='134274', `diff`='5.1', `diff_rate`='0.38%', `time`='2018-01-15 16:03:42' WHERE `name`='xau'
2018-01-15 16:02:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.78', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.78', `diff`='-0.137', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:40' WHERE `name`='usd'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:18 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:19 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:19 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:19 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:20 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:20 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:44')
2018-01-15 16:02:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134275', '2018-01-15 16:03:44')
2018-01-15 16:02:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:20 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.779', '2018-01-15 16:03:44')
2018-01-15 16:02:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:03:44' WHERE `name`='conc'
2018-01-15 16:02:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134275', `open`='133665', `high`='134480', `low`='133611', `close`='134275', `diff`='5.11', `diff_rate`='0.38%', `time`='2018-01-15 16:03:44' WHERE `name`='xau'
2018-01-15 16:02:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.779', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.779', `diff`='-0.138', `diff_rate`='-0.15%', `time`='2018-01-15 16:03:44' WHERE `name`='usd'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:21 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:22 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:22 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:22 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:44')
2018-01-15 16:02:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:23 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134276', '2018-01-15 16:03:47')
2018-01-15 16:02:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:23 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:03:47')
2018-01-15 16:02:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134276', `open`='133665', `high`='134480', `low`='133611', `close`='134276', `diff`='5.12', `diff_rate`='0.38%', `time`='2018-01-15 16:03:47' WHERE `name`='xau'
2018-01-15 16:02:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.773', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.773', `diff`='-0.144', `diff_rate`='-0.16%', `time`='2018-01-15 16:03:47' WHERE `name`='usd'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:23 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:24 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:25 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.148', '2018-01-15 16:03:28')
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:25 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:25 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:44')
2018-01-15 16:02:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:26 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134275', '2018-01-15 16:03:50')
2018-01-15 16:02:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:26 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.773', '2018-01-15 16:03:49')
2018-01-15 16:02:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134275', `open`='133665', `high`='134480', `low`='133611', `close`='134275', `diff`='5.11', `diff_rate`='0.38%', `time`='2018-01-15 16:03:50' WHERE `name`='xau'
2018-01-15 16:02:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.773', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.773', `diff`='-0.144', `diff_rate`='-0.16%', `time`='2018-01-15 16:03:49' WHERE `name`='usd'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:26 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:27 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:27 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:03:46')
2018-01-15 16:02:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:03:46', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:02:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:46' WHERE `name`='ng'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:28 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:28 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6444', '2018-01-15 16:03:52')
2018-01-15 16:02:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:03:52')
2018-01-15 16:02:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:28 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.771', '2018-01-15 16:03:52')
2018-01-15 16:02:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6444', `open`='6443', `high`='6459', `low`='6418', `close`='6444', `diff`='0.04', `diff_rate`='0.06%', `time`='2018-01-15 16:03:52' WHERE `name`='conc'
2018-01-15 16:02:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:03:52' WHERE `name`='xau'
2018-01-15 16:02:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.771', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.771', `diff`='-0.146', `diff_rate`='-0.16%', `time`='2018-01-15 16:03:52' WHERE `name`='usd'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:29 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:30 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:30 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:03:48')
2018-01-15 16:02:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.149', `time`='2018-01-15 16:03:48', `diff`='-0.05', `diff_rate`='-1.59%' WHERE `name`='ng'
2018-01-15 16:02:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.149', `diff`='-0.05', `diff_rate`='-1.59%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:48' WHERE `name`='ng'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:31 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:32 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:32 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:54')
2018-01-15 16:02:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:32 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:03:55')
2018-01-15 16:02:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:32 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.767', '2018-01-15 16:03:56')
2018-01-15 16:02:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6443', `open`='6443', `high`='6459', `low`='6418', `close`='6443', `diff`='0.03', `diff_rate`='0.05%', `time`='2018-01-15 16:03:54' WHERE `name`='conc'
2018-01-15 16:02:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:03:55' WHERE `name`='xau'
2018-01-15 16:02:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.767', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.767', `diff`='-0.15', `diff_rate`='-0.16%', `time`='2018-01-15 16:03:56' WHERE `name`='usd'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:32 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:34 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.149', '2018-01-15 16:03:48')
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:34 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:34 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:54')
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:34 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134283', '2018-01-15 16:03:58')
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:34 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:03:58')
2018-01-15 16:02:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134283', `open`='133665', `high`='134480', `low`='133611', `close`='134283', `diff`='5.19', `diff_rate`='0.39%', `time`='2018-01-15 16:03:58' WHERE `name`='xau'
2018-01-15 16:02:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:03:58' WHERE `name`='usd'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:35 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:36 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT `table_name`, `id` FROM `product` `product` WHERE `product`.`state`=1
2018-01-15 16:02:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ng`
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ng' AND kcu.table_name = 'data_ng'
2018-01-15 16:02:36 [info][yii\db\Command::execute] INSERT INTO `data_ng` (`price`, `time`) VALUES ('3.150', '2018-01-15 16:03:55')
2018-01-15 16:02:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='3.150', `time`='2018-01-15 16:03:55', `diff`='-0.05', `diff_rate`='-1.56%' WHERE `name`='ng'
2018-01-15 16:02:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `name`='ng', `price`='3.150', `diff`='-0.05', `diff_rate`='-1.56%', `open`='3.128', `close`='3.200', `low`='3.087', `high`='3.157', `time`='2018-01-15 16:03:55' WHERE `name`='ng'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:36 [trace][yii\base\Controller::runAction] Route to run: init/gather2
2018-01-15 16:02:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather2()
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-01-15 16:02:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=localhost;dbname=yunlife
2018-01-15 16:02:36 [info][yii\db\Command::query] SELECT `table_name`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=2)
2018-01-15 16:02:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_conc`
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_conc' AND kcu.table_name = 'data_conc'
2018-01-15 16:02:37 [info][yii\db\Command::execute] INSERT INTO `data_conc` (`price`, `time`) VALUES ('6443', '2018-01-15 16:03:54')
2018-01-15 16:02:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-01-15 16:02:37 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('134284', '2018-01-15 16:04:01')
2018-01-15 16:02:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_usd`
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_usd' AND kcu.table_name = 'data_usd'
2018-01-15 16:02:37 [info][yii\db\Command::execute] INSERT INTO `data_usd` (`price`, `time`) VALUES ('90.768', '2018-01-15 16:04:01')
2018-01-15 16:02:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-01-15 16:02:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='134284', `open`='133665', `high`='134480', `low`='133611', `close`='134284', `diff`='5.2', `diff_rate`='0.39%', `time`='2018-01-15 16:04:01' WHERE `name`='xau'
2018-01-15 16:02:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='90.768', `open`='90.917', `high`='90.944', `low`='90.623', `close`='90.768', `diff`='-0.149', `diff_rate`='-0.16%', `time`='2018-01-15 16:04:01' WHERE `name`='usd'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT `id` FROM `product` `product` WHERE `force_sell`=1
2018-01-15 16:02:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `product`
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'product' AND kcu.table_name = 'product'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='1'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='2'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='3'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='4'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='5'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='6'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='7'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='8'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='9'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='10'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='11'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='12'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='13'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='14'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='15'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='16'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='17'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='18'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='19'
2018-01-15 16:02:37 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='20'
2018-01-15 16:02:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='21'
2018-01-15 16:02:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='22'
2018-01-15 16:02:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='23'
2018-01-15 16:02:38 [info][yii\db\Command::query] SELECT * FROM `product` `product` WHERE `id`='24'
2018-01-15 16:02:38 [info][yii\db\Command::query] SELECT o.id, a.price FROM `order` o INNER JOIN product p on p.id = o.product_id INNER JOIN data_all a on a.name = p.table_name where 
            (order_state = 1 AND ((a.price >= stop_profit_point) OR (a.price <= stop_loss_point)))
2018-01-15 16:02:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-01-15 16:02:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-01-15 16:02:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-01-15 16:02:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-01-15 16:02:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
